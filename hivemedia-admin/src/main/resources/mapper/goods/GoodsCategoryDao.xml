<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.hivemedia.modules.goods.dao.GoodsCategoryDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="cn.hivemedia.modules.goods.entity.GoodsCategoryEntity" id="goodsCategoryMap">
        <result property="id" column="id"/>
        <result property="categoryId" column="category_id"/>
        <result property="goodsId" column="goods_id"/>
    </resultMap>

    <select id="queryGoodsCateVoList" resultType="cn.hivemedia.modules.goods.vo.GoodsCateVo">
    select
    gc.id,
    gc.category_id,
    gc.goods_id,
    g.name as goods_name,
    c.name as cate_name
    FROM tb_goods_category gc
    left join tb_goods g
    on g.id = gc.goods_id
    left join tb_category c
    on c.id = gc.category_id
    WHERE 1=1
    <if test="name != null and name.trim() != ''">
        AND name LIKE concat('%',#{name},'%')
    </if>
    <choose>
        <when test="sidx != null and sidx.trim() != ''">
            order by ${sidx} ${order}
        </when>
        <otherwise>
            order by gc.id desc
        </otherwise>
    </choose>
    <if test="offset != null and limit != null">
        limit #{offset}, #{limit}
    </if>
</select>

    <select id="queryGoodsCateVo" resultType="cn.hivemedia.modules.goods.vo.GoodsCateVo">
        select
        gc.id,
        gc.category_id,
        gc.goods_id,
        g.name as goods_name,
        c.name as cate_name
        FROM tb_goods_category gc
        left join tb_goods g
        on g.id = gc.goods_id
        left join tb_category c
        on c.id = gc.category_id
        where gc.id = #{id}
    </select>

    <select id="queryTotal" resultType="java.lang.Integer">
        select count(1) from tb_goods_category
        WHERE 1=1
        <if test="name != null and name.trim() != ''">
            AND name LIKE concat('%',#{name},'%')
        </if>
    </select>


</mapper>